
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>模拟面试</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        .back-button {
            position: absolute;
            top: 15px;
            left: 15px;
            padding: 10px 15px;
            background-color: #4CAF50; /* 按钮背景色 */
            color: white; /* 字体颜色 */
            border: none;
            border-radius: 25px; /* 圆角 */
            cursor: pointer;
            font-size: 16px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* 阴影效果 */
            transition: background-color 0.3s, transform 0.3s; /* 平滑过渡 */
            z-index: 10; /* 确保按钮在最上层 */
        }

        .back-button:hover {
            background-color: #45a049; /* 鼠标悬停时按钮颜色 */
            transform: translateY(-2px); /* 效果：向上抬起 */
        }

        .bar{
            width: 700px;
            height: 550px;
            margin-left: 440px;
            margin-top: 200px;
            padding-top: 40px;
            padding-left: 60px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0, 0, 0.1);
           }

        .question {
            margin-bottom: 20px;
            display: none; /* 初始隐藏所有问题 */
        }
        .feedback {
            margin-top: 10px;
            padding: 10px;
            background-color: #f0f0f0;
            border-radius: 5px;
            display: none;
        }
        textarea {
            width: 500px;
            height: 120px;
            margin-top: 10px;
        }
        button {
            margin-top: 10px;
            padding: 10px 20px;
            background-color: #007BFF;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        button:hover {
            background-color: #0056b3;
        }
        .timer {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 20px;
        }
        .pulse-button {
            margin-top: 10px;
            padding: 10px 20px;
            background-color: #28a745;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            animation: pulse 1s infinite;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        .score {
            margin-top: 20px;
            font-size: 1.5em;
            font-weight: bold;
            color: #28a745;
        }
        .button-container {
            display: flex;
            gap: 10px;
        }
    </style>
</head>
<body>
<!-- 返回按钮 -->
    <button class="back-button" onclick="window.location.href='index.html'">返回</button>
    <div class="bar">
    <h1>模拟面试</h1>
    <div class="timer" id="timer">剩余时间：10:00</div>

    <div class="question" id="question1">
        <p><strong>1. Tell me about yourself.</strong></p>
        <textarea id="answer1"></textarea>
        <div class="button-container">
            <button onclick="startSpeechToText(1)">开始语音输入</button>
            <button onclick="submitAnswer(1)">提交</button>
        </div>
        <div id="feedback1" class="feedback">
            <p><strong>点评:</strong> 这是一个展示你背景和经验的好机会。确保你的回答简洁明了，突出与职位相关的技能和经验。</p>
        </div>
    </div>
    <div class="question" id="question2">
        <p><strong>2. What are your strengths?</strong></p>
        <textarea id="answer2"></textarea>
        <div class="button-container">
            <button onclick="startSpeechToText(2)">开始语音输入</button>
            <button onclick="submitAnswer(2)">提交</button>
        </div>
        <div id="feedback2" class="feedback">
            <p><strong>点评:</strong> 强调你的优势时，尽量提供具体的例子来支持你的说法。例如，你可以提到你在某个项目中如何运用你的优势取得了成功。</p>
        </div>
    </div>
    <div class="question" id="question3">
        <p><strong>3. What is your greatest weakness?</strong></p>
        <textarea id="answer3"></textarea>
        <div class="button-container">
            <button onclick="startSpeechToText(3)">开始语音输入</button>
            <button onclick="submitAnswer(3)">提交</button>
        </div>
        <div id="feedback3" class="feedback">
            <p><strong>点评:</strong> 回答这个问题时，选择一个真实的弱点，但要展示你如何努力改进它。避免提及与职位核心要求直接冲突的弱点。</p>
        </div>
    </div>
    <div class="question" id="question4">
        <p><strong>4. Why do you want to work here?</strong></p>
        <textarea id="answer4"></textarea>
        <div class="button-container">
            <button onclick="startSpeechToText(4)">开始语音输入</button>
            <button onclick="submitAnswer(4)">提交</button>
        </div>
        <div id="feedback4" class="feedback">
            <p><strong>点评:</strong> 展示你对公司的了解和热情。提到公司的文化、项目或愿景，并说明你如何能为公司做出贡献。</p>
        </div>
    </div>
    <div class="question" id="question5">
        <p><strong>5. Where do you see yourself in five years?</strong></p>
        <textarea id="answer5"></textarea>
        <div class="button-container">
            <button onclick="startSpeechToText(5)">开始语音输入</button>
            <button onclick="submitAnswer(5)">提交</button>
        </div>
        <div id="feedback5" class="feedback">
            <p><strong>点评:</strong> 你的回答应该展示你的职业目标和对未来的规划，同时也要表明你希望在公司内长期发展。</p>
        </div>
    </div>
    <div class="question" id="question6">
        <p><strong>6. Can you describe a challenging situation you faced at work and how you handled it?</strong></p>
        <textarea id="answer6"></textarea>
        <div class="button-container">
            <button onclick="startSpeechToText(6)">开始语音输入</button>
            <button onclick="submitAnswer(6)">提交</button>
        </div>
        <div id="feedback6" class="feedback">
            <p><strong>点评:</strong> 选择一个具体的例子，描述你如何分析问题、采取行动并最终解决问题。强调你的解决问题的能力和团队合作精神。</p>
        </div>
    </div>
    <div class="question" id="question7">
        <p><strong>7. Why should we hire you?</strong></p>
        <textarea id="answer7"></textarea>
        <div class="button-container">
            <button onclick="startSpeechToText(7)">开始语音输入</button>
            <button onclick="submitAnswer(7)">提交</button>
        </div>
        <div id="feedback7" class="feedback">
            <p><strong>点评:</strong> 强调你的独特优势和你如何能为公司带来价值。结合你的技能、经验和个性，展示你与职位的契合度。</p>
        </div>
    </div>
    <div class="question" id="question8">
        <p><strong>8. Do you have any questions for us?</strong></p>
        <textarea id="answer8"></textarea>
        <div class="button-container">
            <button onclick="startSpeechToText(8)">开始语音输入</button>
            <button onclick="submitAnswer(8)">提交</button>
        </div>
        <div id="feedback8" class="feedback">
            <p><strong>点评:</strong> 准备一些有深度的问题，展示你对公司和职位的兴趣。例如，询问公司的发展计划、团队文化或职位的具体职责。</p>
        </div>
    </div>
    </div>
    <script>
        let currentQuestion = 1; // 当前题目编号
        let timer; // 计时器
        let timeLeft = 600; // 10分钟，单位：秒
        let recognition; // 语音识别对象
        let isListening = false; // 是否正在语音输入

        // 显示当前题目
        function showQuestion(questionNumber) {
            // 隐藏所有题目
            document.querySelectorAll('.question').forEach(q => q.style.display = 'none');
            // 显示当前题目
            document.getElementById('question' + questionNumber).style.display = 'block';
            // 重置计时器
            resetTimer();
        }

        // 显示点评
        function showFeedback(questionNumber) {
            const feedback = document.getElementById('feedback' + questionNumber);
            feedback.style.display = 'block';

            if (questionNumber === 8) {
                // 如果是最后一道题，显示评分
                const score = calculateScore();
                const scoreDiv = document.createElement('div');
                scoreDiv.className = 'score';
                scoreDiv.innerText = `您的评分是：${score} 分`;
                feedback.appendChild(scoreDiv);

                // 添加确认按钮
                const confirmButton = document.createElement('button');
                confirmButton.innerText = '确认';
                confirmButton.onclick = redirectToThankYouPage;
                feedback.appendChild(confirmButton);
            } else {
                // 显示“下一题”按钮
                const nextButton = document.createElement('button');
                nextButton.innerText = '下一题';
                nextButton.onclick = nextQuestion;
                feedback.appendChild(nextButton);
            }
        }

        // 跳转到下一题
        function nextQuestion() {
            if (currentQuestion < 8) {
                currentQuestion++;
                showQuestion(currentQuestion);
            } else {
                alert('面试结束！');
            }
        }

        // 重置计时器
        function resetTimer() {
            clearInterval(timer);
            timeLeft = 600; // 重置为10分钟
            updateTimerDisplay();
            timer = setInterval(updateTimer, 1000);
        }

        // 更新计时器显示
        function updateTimer() {
            timeLeft--;
            if (timeLeft <= 0) {
                clearInterval(timer);
                alert('时间到！自动跳转到下一题。');
                nextQuestion();
            } else {
                updateTimerDisplay();
            }
        }

        // 更新计时器文本
        function updateTimerDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            document.getElementById('timer').innerText = `剩余时间：${minutes}:${seconds.toString().padStart(2, '0')}`;
        }

        // 初始化语音识别
        function initSpeechRecognition() {
            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            if (!SpeechRecognition) {
                alert('您的浏览器不支持语音识别功能，请使用 Chrome 或 Edge 浏览器。');
                return;
            }
            recognition = new SpeechRecognition();
            recognition.continuous = false; // 单次识别
            recognition.interimResults = false; // 不显示临时结果
            recognition.lang = 'en-US'; // 设置语言为英语

            recognition.onresult = (event) => {
                const transcript = event.results[0][0].transcript;
                const answerBox = document.getElementById(`answer${currentQuestion}`);
                answerBox.value = transcript; // 将语音识别结果填充到答题框
            };

            recognition.onend = () => {
                isListening = false;
                document.querySelector(`#question${currentQuestion} button`).innerText = '开始语音输入';
                document.querySelector(`#question${currentQuestion} button`).classList.remove('pulse-button');
            };
        }

        // 开始语音转文字
        function startSpeechToText(questionNumber) {
            if (!recognition) {
                initSpeechRecognition();
            }
            if (isListening) {
                recognition.stop();
                isListening = false;
                document.querySelector(`#question${questionNumber} button`).innerText = '开始语音输入';
                document.querySelector(`#question${questionNumber} button`).classList.remove('pulse-button');
            } else {
                recognition.start();
                isListening = true;
                document.querySelector(`#question${questionNumber} button`).innerText = '停止语音输入';
                document.querySelector(`#question${questionNumber} button`).classList.add('pulse-button');
            }
        }

        // 提交答案
        function submitAnswer(questionNumber) {
            const answer = document.getElementById(`answer${questionNumber}`).value.trim();
            if (answer === '') {
                alert('请先输入答案！');
                return;
            }
            showFeedback(questionNumber);
        }

        // 计算评分
        function calculateScore() {
            let totalScore = 0;
            for (let i = 1; i <= 8; i++) {
                const answer = document.getElementById(`answer${i}`).value.trim();
                if (answer.length > 0) {
                    totalScore += 10; // 每道题满分10分
                }
            }
            return totalScore;
        }

        // 跳转到感谢页面
        function redirectToThankYouPage() {
            window.location.href = 'english_result.html'; // 跳转到感谢页面
        }

        // 初始化
        showQuestion(currentQuestion);
    </script>
</body>
</html>